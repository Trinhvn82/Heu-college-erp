{% extends 'layouts/rental_base.html' %}
{% block content %}
<div class="container py-4">
    <h2 class="mb-4">Đề xuất của người dùng</h2>
    <div class="mb-3 text-right">
        <a href="{% url 'forum_create' %}" class="btn btn-success rounded-pill">
            <i class="fas fa-plus"></i> Đăng đề xuất mới
        </a>
    </div>
    {% for post in posts %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">
                <a href="{% url 'forum_detail' post.id %}">{{ post.title }}</a>
            </h5>
            <p class="card-text">{{ post.content|truncatechars:120 }}</p>
            {% if post.images.count > 0 %}
            <img src="{{ post.images.first.image.url }}" class="img-fluid mb-2" style="max-width:200px;max-height:120px;object-fit:cover;border-radius:8px;" alt="Ảnh đề xuất">
            {% endif %}
            <div class="text-muted small">Bởi {{ post.author.username }} lúc {{ post.created_at|date:'d/m/Y H:i' }}</div>
            <span class="ml-2"><i class="fas fa-thumbs-up"></i> {{ post.likes.count }} lượt thích</span>
            <span class="ml-3"><i class="fas fa-comment-dots"></i> {{ post.replies.count }} bình luận</span>
            <div class="mt-3">
                <a href="{% url 'forum_detail' post.id %}" class="btn btn-outline-primary btn-sm rounded-pill">
                    <i class="fas fa-eye"></i> Xem chi tiết
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <p>Chưa có đề xuất nào.</p>
    {% endfor %}
</div>
{% endblock %}

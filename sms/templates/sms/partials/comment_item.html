<div class="card mb-2 {% if comment.user.username == user.username %}border-primary{% endif %}">
  <div class="card-body py-2 px-3">
    <div class="d-flex justify-content-between align-items-start mb-1">
      <strong class="text-primary">
        <i class="fas fa-user-circle me-1"></i>{{ comment.user.username }}
        {% if is_landlord and comment.user.username != user.username %}
          <span class="badge bg-info text-white">Khách thuê</span>
        {% elif not is_landlord and comment.user.username != user.username %}
          <span class="badge bg-warning text-dark">Chủ nhà</span>
        {% endif %}
      </strong>
      <small class="text-muted">{{ comment.created_at|date:'d/m/Y H:i' }}</small>
    </div>
    <p class="mb-1" style="white-space: pre-wrap;">{{ comment.comment }}</p>
    
    {% if comment.replies.all %}
      <div class="ms-4 mt-2">
        {% for reply in comment.replies.all %}
          <div class="card mb-1 border-start border-3">
            <div class="card-body py-1 px-2">
              <div class="d-flex justify-content-between">
                <small class="fw-bold text-secondary">{{ reply.user.username }}</small>
                <small class="text-muted">{{ reply.created_at|date:'d/m H:i' }}</small>
              </div>
              <p class="mb-0 small">{{ reply.comment }}</p>
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>
